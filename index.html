<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>贪吃蛇</title>  
    <style>  
        #game {  
            width: 400px;  
            height: 400px;  
            border: 1px solid black;  
            position: relative;  
            overflow: hidden;  
        }  
        .snake, .food {  
            width: 20px;  
            height: 20px;  
            position: absolute;  
        }  
        .snake {  
            background-color: green;  
        }  
        .food {  
            background-color: red;  
        }  
    </style>  
</head>  
<body>  
    <div id="game"></div>  
    <script>  
        const game = document.getElementById('game');  
        const boxSize = 20;  
        const gridSize = 20;  
        let snake = [{ x: 5, y: 5 }];  
        let food = { x: Math.floor(Math.random() * gridSize), y: Math.floor(Math.random() * gridSize) };  
        let dx = 1;  
        let dy = 0;  
  
        function draw() {  
            game.innerHTML = '';  
            snake.forEach(segment => {  
                const segmentElem = document.createElement('div');  
                segmentElem.style.left = `${segment.x * boxSize}px`;  
                segmentElem.style.top = `${segment.y * boxSize}px`;  
                segmentElem.classList.add('snake');  
                game.appendChild(segmentElem);  
            });  
            const foodElem = document.createElement('div');  
            foodElem.style.left = `${food.x * boxSize}px`;  
            foodElem.style.top = `${food.y * boxSize}px`;  
            foodElem.classList.add('food');  
            game.appendChild(foodElem);  
        }  
  
        function moveSnake() {  
            const head = { ...snake[0] };  
            head.x += dx;  
            head.y += dy;  
  
            if (head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize) {  
                alert('游戏结束!');  
                return;  
            }  
  
            for (let i = 1; i < snake.length; i++) {  
                if (snake[i].x === head.x && snake[i].y === head.y) {  
                    alert('游戏结束!');  
                    return;  
                }  
            }  
  
            snake.unshift(head);  
  
            if (head.x === food.x && head.y === food.y) {  
                food = { x: Math.floor(Math.random() * gridSize), y: Math.floor(Math.random() * gridSize) };  
            } else {  
                snake.pop();  
            }  
  
            draw();  
            setTimeout(moveSnake, 100);  
        }  
  
        document.addEventListener('keydown', event => {  
            if (event.key === 'ArrowUp' && dy === 0) {  
                dx = 0;  
                dy = -1;  
            } else if (event.key === 'ArrowDown' && dy === 0) {  
                dx = 0;  
                dy = 1;  
            } else if (event.key === 'ArrowLeft' && dx === 0) {  
                dx = -1;  
                dy = 0;  
            } else if (event.key === 'ArrowRight' && dx === 0) {  
                dx = 1;  
                dy = 0;  
            }  
        });  
  
        draw();  
        moveSnake();  
    </script>  
</body>  
</html>